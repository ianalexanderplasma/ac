<html lang="en">    

<title>Activity Chart</title>

<head>
    <script src="js/jquery.js"></script>
    <script src="js/app.js"></script>
    <script lang="javascript" src="js/xlsx.full.min.js"></script>
    <link href="css/fontawesome/css/all.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
</head>
<body>

    <input type="file" id="fileUploader" name="fileUploader" accept=".xls, .xlsx"/>

    <div id="toggles"></div>

    <table id="chart" class="table-dragable" style="display: none"></table>

<table class="table-dragable">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr class="grabable">
      <td>1</td>
      <td>First Row</td>
      <td>Lorem ipsum</td>
      <td>Dolor</td>
      <td></td>
    </tr>
    <tr>
      <td>2</td>
      <td>Second Row</td>
      <td><input /></td>
      <td><a href="#">Link</a></td>
      <td class="grabable">&varr;</td>
    </tr>
  </tbody>
</table>

<script type="text/javascript">
	
	$('.table-dragable tbody .grabable').mousedown(function (e) {
		console.log('TEST');
  var tr = $(e.target).closest('tr'), sy = e.pageY, drag;
  if ($(e.target).is('tr')) tr = $(e.target);
  var index = tr.index();
  $(tr).addClass('grabbed');
  function move (e) {
    if (!drag && Math.abs(e.pageY - sy) < 10) return;
    drag = true;
    tr.siblings().each(function() {
      var s = $(this), i = s.index(), y = s.offset().top;
      if (e.pageY >= y && e.pageY < y + s.outerHeight()) {
        if (i < tr.index()) s.insertAfter(tr);
        else s.insertBefore(tr);
        return false;
      }
    });
  }
  function up (e) {
    if (drag && index != tr.index()) {
      drag = false;
    }
    $(document).unbind('mousemove', move).unbind('mouseup', up);
    $(tr).removeClass('grabbed');
  }
  $(document).mousemove(move).mouseup(up);
});

</script>

    
</body>


