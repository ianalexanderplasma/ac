<html lang="en">    

<title>Activity Chart</title>

<head>
    <script src="js/jquery.js"></script>
    <script src="js/app.js"></script>
    <script lang="javascript" src="js/xlsx.full.min.js"></script>
    <link href="css/fontawesome/css/all.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
</head>
<body>

    <input type="file" id="fileUploader" name="fileUploader" accept=".xls, .xlsx"/>

    <div id="toggles"></div>

    <table id="chart" class="table-dragable" style="display: none"></table>



<table class="table-dragable">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr class="grabable">
      <td>1</td>
      <td>First Row</td>
      <td>Lorem ipsum</td>
      <td>Dolor</td>
      <td></td>
    </tr>
    <tr>
      <td>2</td>
      <td>Second Row</td>
      <td><input /></td>
      <td><a href="#">Link</a></td>
      <td class="grabable">&varr;</td>
    </tr>
  </tbody>
</table>


<table id="chart" class="table-dragable" style="display: block;">
   <tbody>
      <tr style="background: rgb(255, 255, 255);">
         <th></th>
         <th id="2020-0">
            <h3>Jan 2020</h3>
         </th>
         <th id="2020-1">
            <h3>Feb 2020</h3>
         </th>
         <th id="2020-2">
            <h3>Mar 2020</h3>
         </th>
         <th id="2020-3">
            <h3>Apr 2020</h3>
         </th>
         <th id="2020-4">
            <h3>May 2020</h3>
         </th>
         <th id="2020-5">
            <h3>Jun 2020</h3>
         </th>
         <th id="2020-6">
            <h3>Jul 2020</h3>
         </th>
         <th id="2020-7">
            <h3>Aug 2020</h3>
         </th>
      </tr>
      <tr class="grabable" id="AFG" style="background: rgb(242, 242, 242);">
         <td>
            <h3>ROW 1</h3>
         </td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span>
         </td>
         <td class="cell"><span><i class="far fa-calendar"><br><span></span></i></span><span><i class="far fa-calendar"><br><span></span></i></span><span><i class="fas fa-tools pdm"><br><span></span></i></span><span><i class="fas fa-crown pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="fas fa-tools pdm"><br><span></span></i></span><span><i class="fas fa-crown pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span>
         </td>
         <td class="cell"><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-calendar"><br><span></span></i></span></td>
      </tr>
      
      <tr class="grabable" id="AFG" style="background: rgb(242, 242, 242);">
         <td>
            <h3>ROW 2</h3>
         </td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span>
         </td>
         <td class="cell"><span><i class="far fa-calendar"><br><span></span></i></span><span><i class="far fa-calendar"><br><span></span></i></span><span><i class="fas fa-tools pdm"><br><span></span></i></span><span><i class="fas fa-crown pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="fas fa-tools pdm"><br><span></span></i></span><span><i class="fas fa-crown pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span>
         </td>
         <td class="cell"><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-calendar"><br><span></span></i></span></td>
      </tr>
      <tr class="grabable" id="AFG" style="background: rgb(242, 242, 242);">
         <td>
            <h3>ROW 3</h3>
         </td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="fas fa-users"><br><span></span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span>
         </td>
         <td class="cell"><span><i class="far fa-calendar"><br><span></span></i></span><span><i class="far fa-calendar"><br><span></span></i></span><span><i class="fas fa-tools pdm"><br><span></span></i></span><span><i class="fas fa-crown pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span></td>
         <td class="cell"><span><i class="fas fa-users"><br><span></span></i></span><span><i class="fas fa-tools pdm"><br><span></span></i></span><span><i class="fas fa-crown pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span>
         </td>
         <td class="cell"><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-file-alt pdm"><br><span>TBD</span></i></span><span><i class="far fa-calendar"><br><span></span></i></span></td>
      </tr>
   </tbody>
</table>





<script type="text/javascript">
	
	$('.table-dragable tbody .grabable').mousedown(function (e) {
		console.log('TEST');
		var tr = $(e.target).closest('tr'), sy = e.pageY, drag;
		if ($(e.target).is('tr')) tr = $(e.target);
		var index = tr.index();
		$(tr).addClass('grabbed');

		function move (e) {
			if (!drag && Math.abs(e.pageY - sy) < 10) return;
			drag = true;
			tr.siblings().each(function() {
				var s = $(this), i = s.index(), y = s.offset().top;
				if (e.pageY >= y && e.pageY < y + s.outerHeight()) {
					if (i < tr.index()) s.insertAfter(tr);
					else s.insertBefore(tr);
					return false;
				}
			});
		}
		function up (e) {
			if (drag && index != tr.index()) {
				drag = false;
			}
			$(document).unbind('mousemove', move).unbind('mouseup', up);
			$(tr).removeClass('grabbed');
		}
		$(document).mousemove(move).mouseup(up);
	});

</script>

    
</body>


